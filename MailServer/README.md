# Mail Server

### Configuration
[Example of configuration](https://fabianlee.org/2019/10/23/docker-running-a-postfix-container-for-testing-mail-during-development/)

```
docker run -ti --rm -v "$(pwd)"/config/ssl:/tmp/docker-mailserver/ssl -h mail.domain.com -t tvial/docker-mailserver generate-ssl-certificate
```
### Run mail server
```
docker-compose up -d
```

```
docker-compose logs -f
```
### Create users
```
chmod +x setup.sh

# create mail account user/password
./setup.sh -i tvial/docker-mailserver:latest email add admin@domain.com admin123
./setup.sh -i tvial/docker-mailserver:latest email add user@domain.com user123

# list all email accounts
./setup.sh -i tvial/docker-mailserver:latest email list
```
### Testing of send email 
```
sudo apt-get install swaks
# send email to user@domain.com
swaks --from admin@domain.com --to user@domain.com --server <hostIP>:587 -tlso -au admin@domain.com -ap user123 --header "Subject: test from admin" --body "testing 123"

# send email to admin@domain.com
swaks --from user@domain.com --to admin@domain.com --server <hostIP>:587 -tlso -au user@domain.com -ap admin123 --header "Subject: test from user" --body "testing 456"
```